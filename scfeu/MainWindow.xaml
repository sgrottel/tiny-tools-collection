<Window x:Name="window" x:Class="scfeu.MainWindow"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:local="clr-namespace:scfeu"
		xmlns:local_Scanned="clr-namespace:scfeu.Scanned"
		mc:Ignorable="d"
		xmlns:behaviors="clr-namespace:WPFTextBoxAutoComplete;assembly=WPFTextBoxAutoComplete"
		Title="scfeu" Width="1280" Height="720" AllowDrop="True" DragOver="window_DragOver" Drop="window_Drop" Closed="window_Closed">
	<Window.TaskbarItemInfo>
		<TaskbarItemInfo ProgressState="{Binding ElementName=window, Path=JobProgressState, Mode=OneWay}" ProgressValue="{Binding ElementName=window, Path=JobProgressPercent, Mode=OneWay}" />
	</Window.TaskbarItemInfo>

	<Grid Margin="5">
		<Grid.RowDefinitions>
			<RowDefinition Height="auto"/>
			<RowDefinition Height="auto"/>
			<RowDefinition Height="*" />
		</Grid.RowDefinitions>
		<StackPanel Grid.Row="0">
			<Grid Margin="0,0,0,3">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="auto" />
					<ColumnDefinition Width="*" />
					<ColumnDefinition Width="auto" />
					<ColumnDefinition Width="auto" />
				</Grid.ColumnDefinitions>
				<Label Grid.Column="0">Directory</Label>
				<TextBox Grid.Column="1" IsEnabled="{Binding ElementName=window, Path=IsUiInteractive}" AllowDrop="True" PreviewDragOver="window_DragOver" Drop="window_Drop"
						 Text="{Binding JobSetup.Directory, ElementName=window, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
						 behaviors:AutoCompleteBehavior.AutoCompleteItemsSource="{Binding ElementName=window, Path=AutoCompleteFileSystemFolders}"
						 behaviors:AutoCompleteBehavior.AutoCompleteStringComparison="InvariantCultureIgnoreCase" TextChanged="TextBox_TextChanged"
						 VerticalContentAlignment="Center"
						 ></TextBox>
				<Button Grid.Column="2" MinWidth="24" Padding="5,1" IsEnabled="{Binding ElementName=window, Path=IsUiInteractive}" Click="BrowseDirButton_Click">...</Button>
				<ToggleButton Grid.Column="3" MinWidth="24" Margin="3,0,0,0" IsEnabled="{Binding ElementName=window, Path=IsUiInteractive}" x:Name="filterToggleButton" IsChecked="false">
					<!-- This file was generated by the AiToXaml tool.-->
					<!-- Tool Version: 14.0.22307.0 -->
					<Viewbox Width="16" Height="16" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
						<Rectangle Width="16" Height="16">
							<Rectangle.Fill>
								<DrawingBrush>
									<DrawingBrush.Drawing>
										<DrawingGroup>
											<DrawingGroup.Children>
												<GeometryDrawing Brush="#00FFFFFF" Geometry="F1M16,16L0,16 0,0 16,0z" />
												<GeometryDrawing Brush="#FFF6F6F6" Geometry="F1M16,8C16,8.312,15.979,8.618,15.943,8.92L15.873,9.54 13.638,10.335 14.654,12.474 14.269,12.962C13.888,13.444,13.448,13.884,12.964,14.268L12.476,14.655 10.336,13.637 9.542,15.87 8.924,15.942C8.621,15.979 8.313,16 8,16 7.689,16 7.383,15.979 7.081,15.943L6.461,15.873 5.666,13.638 3.525,14.655 3.037,14.268C2.554,13.885,2.115,13.446,1.732,12.963L1.345,12.475 2.362,10.335 0.127000000000001,9.54 0.0559999999999992,8.92C0.0220000000000002,8.618 0,8.312 0,8 0,7.688 0.0220000000000002,7.382 0.0559999999999992,7.08L0.127000000000001,6.46 2.362,5.665 1.345,3.524 1.732,3.036C2.117,2.552,2.556,2.113,3.038,1.731L3.525,1.345 5.667,2.363 6.461,0.127 7.081,0.0560000000000001C7.383,0.0220000000000002 7.689,0 8,0 8.313,0 8.619,0.0220000000000002 8.923,0.0570000000000004L9.541,0.128 10.335,2.363 12.476,1.346 12.964,1.732C13.446,2.114,13.886,2.554,14.269,3.038L14.654,3.525 13.638,5.665 15.873,6.46 15.943,7.08C15.979,7.382,16,7.688,16,8" />
												<GeometryDrawing Brush="#FF424242" Geometry="F1M8,6.5C7.171,6.5 6.5,7.172 6.5,8 6.5,8.828 7.171,9.5 8,9.5 8.829,9.5 9.5,8.828 9.5,8 9.5,7.172 8.829,6.5 8,6.5 M8,5C6.343,5 5,6.343 5,8 5,9.657 6.343,11 8,11 9.657,11 11,9.657 11,8 11,6.343 9.657,5 8,5 M12.714,9.603C12.644,9.81,12.564,10.01,12.468,10.203L13.484,12.342C13.149,12.766,12.767,13.148,12.343,13.484L10.203,12.467C10.01,12.564,9.81,12.643,9.603,12.714L8.808,14.949C8.542,14.98 8.273,15 8,15 7.728,15 7.459,14.98 7.194,14.95L6.399,12.715C6.192,12.644,5.991,12.564,5.798,12.468L3.658,13.484C3.234,13.148,2.852,12.766,2.516,12.342L3.532,10.203C3.437,10.01,3.356,9.81,3.286,9.603L1.05,8.807C1.02,8.542 1,8.273 1,8 1,7.727 1.02,7.458 1.05,7.193L3.286,6.397C3.356,6.19,3.437,5.991,3.532,5.797L2.516,3.658C2.852,3.234,3.234,2.851,3.658,2.516L5.798,3.532C5.991,3.436,6.191,3.356,6.399,3.286L7.194,1.05C7.459,1.02 7.728,1 8,1 8.273,1 8.542,1.02 8.808,1.05L9.603,3.287C9.81,3.357,10.01,3.437,10.203,3.533L12.343,2.516C12.767,2.852,13.149,3.235,13.484,3.658L12.468,5.797C12.564,5.991,12.644,6.19,12.714,6.397L14.95,7.193C14.98,7.458 15,7.727 15,8 15,8.273 14.98,8.542 14.95,8.807z" />
												<GeometryDrawing Brush="#FFEFEFF0" Geometry="F1M8,9.5C7.172,9.5 6.5,8.828 6.5,8 6.5,7.172 7.172,6.5 8,6.5 8.828,6.5 9.5,7.172 9.5,8 9.5,8.828 8.828,9.5 8,9.5 M8,5C6.343,5 5,6.343 5,8 5,9.656 6.343,11 8,11 9.657,11 11,9.656 11,8 11,6.343 9.657,5 8,5" />
											</DrawingGroup.Children>
										</DrawingGroup>
									</DrawingBrush.Drawing>
								</DrawingBrush>
							</Rectangle.Fill>
						</Rectangle>
					</Viewbox>
				</ToggleButton>
			</Grid>
			<StackPanel>
				<StackPanel.Style>
					<Style TargetType="{x:Type StackPanel}">
						<Setter Property="Visibility" Value="Collapsed" />
						<Style.Triggers>
							<DataTrigger Binding="{Binding IsChecked, ElementName=filterToggleButton}" Value="True">
								<Setter Property="Visibility" Value="Visible" />
							</DataTrigger>
						</Style.Triggers>
					</Style>
				</StackPanel.Style>
				<Grid>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="auto" />
						<ColumnDefinition Width="*" />
						<ColumnDefinition Width="auto" />
					</Grid.ColumnDefinitions>
					<Grid.RowDefinitions>
						<RowDefinition />
						<RowDefinition />
					</Grid.RowDefinitions>
					<Label Grid.Row="0" Grid.Column="0" Margin="0,0,0,3">Include Pattern</Label>
					<TextBox Grid.Row="0" Grid.Column="1" IsEnabled="{Binding ElementName=window, Path=IsUiInteractive}" Margin="0,0,0,3"
					Text="{Binding JobSetup.IncludePattern, ElementName=window, Mode=TwoWay}" VerticalContentAlignment="Center"></TextBox>
					<Button Grid.Row="0" Grid.Column="2" Click="JobIncludePatternDefaultButton_Click">Default</Button>
					<Label Grid.Row="1" Grid.Column="0" Margin="0,0,0,3">Exclude Pattern</Label>
					<TextBox Grid.Row="1" Grid.Column="1" IsEnabled="{Binding ElementName=window, Path=IsUiInteractive}" Margin="0,0,0,3"
					Text="{Binding JobSetup.ExcludePattern, ElementName=window, Mode=TwoWay}" VerticalContentAlignment="Center"></TextBox>
					<Button Grid.Row="1" Grid.Column="2" Click="JobExcludePatternDefaultButton_Click">Default</Button>
				</Grid>
				<Grid Margin="0,0,0,3">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="auto" />
						<ColumnDefinition Width="*" />
						<ColumnDefinition Width="auto" />
						<ColumnDefinition Width="*" />
					</Grid.ColumnDefinitions>
					<Label Grid.Column="0">Line Endings</Label>
					<ComboBox Grid.Column="1" x:Name="lineEndingsComboBox" IsEnabled="{Binding ElementName=window, Path=IsUiInteractive}"
						SelectedValue="{Binding JobSetup.LineBreak, ElementName=window, Mode=TwoWay}">
						<ComboBox.ItemTemplate>
							<DataTemplate>
								<TextBlock Text="{Binding Converter={StaticResource EnumDescriptionConverter}}"/>
							</DataTemplate>
						</ComboBox.ItemTemplate>
					</ComboBox>
					<Label Grid.Column="2" Margin="5,0,0,0">Encoding</Label>
					<ComboBox Grid.Column="4" x:Name="encodingComboBox" IsEnabled="{Binding ElementName=window, Path=IsUiInteractive}"
						SelectedValue="{Binding JobSetup.Encoding, ElementName=window, Mode=TwoWay}">
						<ComboBox.ItemTemplate>
							<DataTemplate>
								<StackPanel Orientation="Horizontal">
									<TextBlock Text="{Binding EncodingName}"/>
									<TextBlock Margin="10,0,4,0">(CP:</TextBlock>
									<TextBlock Text="{Binding CodePage}"/>
									<TextBlock>)</TextBlock>
								</StackPanel>
							</DataTemplate>
						</ComboBox.ItemTemplate>
					</ComboBox>
				</Grid>
				<CheckBox Content="Remove Trailing Whitespace" Margin="3" IsChecked="{Binding JobSetup.RemoveTrailingWhitespace,ElementName=window,Mode=TwoWay}"/>
				<GroupBox Margin="3" Header="Leading Whitespace">
					<StackPanel>
						<StackPanel Orientation="Horizontal">
							<Label>Tab Size</Label>
							<TextBox Width="50px" Text="{Binding JobSetup.TabSize,ElementName=window,Mode=TwoWay}" VerticalContentAlignment="Center"/>
							<Label>characters</Label>
						</StackPanel>
						<RadioButton Margin="3" IsChecked="{Binding JobSetup.LeadingWhitespace,ElementName=window,Mode=TwoWay,Converter={StaticResource EnumBooleanConverter},ConverterParameter={x:Static local:LeadingWhitespace.Keep} }">Keep</RadioButton>
						<RadioButton Margin="3" IsChecked="{Binding JobSetup.LeadingWhitespace,ElementName=window,Mode=TwoWay,Converter={StaticResource EnumBooleanConverter},ConverterParameter={x:Static local:LeadingWhitespace.Spaces} }">Ensure Spaces</RadioButton>
						<RadioButton Margin="3" IsChecked="{Binding JobSetup.LeadingWhitespace,ElementName=window,Mode=TwoWay,Converter={StaticResource EnumBooleanConverter},ConverterParameter={x:Static local:LeadingWhitespace.Tabs} }">Ensure Tabs</RadioButton>
						<RadioButton Margin="3" IsChecked="{Binding JobSetup.LeadingWhitespace,ElementName=window,Mode=TwoWay,Converter={StaticResource EnumBooleanConverter},ConverterParameter={x:Static local:LeadingWhitespace.MajorityVoteTabs} }">Make consistent (majority vote; prefer Tabs)</RadioButton>
						<RadioButton Margin="3" IsChecked="{Binding JobSetup.LeadingWhitespace,ElementName=window,Mode=TwoWay,Converter={StaticResource EnumBooleanConverter},ConverterParameter={x:Static local:LeadingWhitespace.MajorityVoteSpaces} }">Make consistent (majority vote; prefer Spaces)</RadioButton>
					</StackPanel>
				</GroupBox>
			</StackPanel>

			<WrapPanel Orientation="Horizontal" Margin="0,0,0,3">
				<Button Margin="0,0,3,0" MinHeight="26" Padding="5,1" Click="ScanDirectoryButton_Click" IsEnabled="{Binding ElementName=window, Path=JobSetup.CanScanDir}">Scan Directory</Button>
				<Button Padding="5,1" IsEnabled="{Binding ElementName=window, Path=JobSetup.CanFixFiles}" Click="FixFilesButton_Click">Fix Files</Button>
			</WrapPanel>
		</StackPanel>
		<Grid Grid.Row="1">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*"/>
				<ColumnDefinition Width="auto"/>
			</Grid.ColumnDefinitions>
			<Grid.Style>
				<Style TargetType="Grid">
					<Setter Property="Visibility" Value="Visible" />
					<Style.Triggers>
						<DataTrigger Binding="{Binding ElementName=window, Path=Job}" Value="{x:Null}">
							<Setter Property="Visibility" Value="Collapsed" />
						</DataTrigger>
					</Style.Triggers>
				</Style>
			</Grid.Style>
			<ProgressBar x:Name="progressBar" Grid.Column="0" Height="20" Margin="0,0,0,3"
						 IsIndeterminate="{Binding ElementName=window, Path=JobIndeterminate, Mode=OneWay}" Maximum="1000"
						 Value="{Binding ElementName=window, Path=JobProgress, Mode=OneWay}"/>
			<Button Padding="5,1" Margin="3,0,0,0" Grid.Column="1" Click="AbortJobButton_Click">Abort</Button>
		</Grid>
		<TreeView x:Name="filesTreeView" Grid.Row="2" IsEnabled="{Binding ElementName=window, Path=IsUiInteractive}">
			<TreeView.Resources>
				<HierarchicalDataTemplate DataType="{x:Type local_Scanned:Directory}" ItemsSource="{Binding Children}">
					<StackPanel Orientation="Horizontal">
						<!-- This file was generated by the AiToXaml tool.-->
						<!-- Tool Version: 14.0.22307.0 -->
						<Viewbox Width="16" Height="16" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
							<Rectangle Width="16" Height="16">
								<Rectangle.Fill>
									<DrawingBrush>
										<DrawingBrush.Drawing>
											<DrawingGroup>
												<DrawingGroup.Children>
													<GeometryDrawing Brush="#00FFFFFF" Geometry="F1M16,16L0,16 0,0 16,0z" />
													<GeometryDrawing Brush="#FFF6F6F6" Geometry="F1M16,2.5L16,12.5C16,13.327,15.327,14,14.5,14L2.504,14C1.677,14,1.004,13.327,1.004,12.5L1.004,4.5C1.004,3.673,1.677,3,2.504,3L5.39,3 6.39,1 14.5,1C15.327,1,16,1.673,16,2.5" />
													<GeometryDrawing Brush="#FFDCB67A" Geometry="F1M14.0039,4L7.5079,4 8.0079,3 8.0119,3 14.0039,3z M14.4999,2L7.0079,2 6.0079,4 2.5039,4C2.2269,4,2.0039,4.224,2.0039,4.5L2.0039,12.5C2.0039,12.776,2.2269,13,2.5039,13L14.4999,13C14.7749,13,14.9999,12.776,14.9999,12.5L14.9999,2.5C14.9999,2.224,14.7749,2,14.4999,2" />
													<GeometryDrawing Brush="#FFF0EFF1" Geometry="F1M8.0001,3.0004L7.5001,4.0004 14.0001,4.0004 14.0001,3.0004z" />
												</DrawingGroup.Children>
											</DrawingGroup>
										</DrawingBrush.Drawing>
									</DrawingBrush>
								</Rectangle.Fill>
							</Rectangle>
						</Viewbox>
						<TextBlock Margin="3,0,0,0" Text="{Binding Name}" />
					</StackPanel>
				</HierarchicalDataTemplate>
				<DataTemplate DataType="{x:Type local_Scanned:File}">
					<StackPanel Orientation="Horizontal">
						<CheckBox IsChecked="{Binding Selected}" IsEnabled="{Binding Enabled}" Margin="0,0,3,0" />
						<TextBlock Text="{Binding Name}" />
						<TextBlock Margin="15,3,0,0" FontSize="9">
							<Run Text="[Encoding:" />
							<Run Text="{Binding EncodingName,Mode=OneWay}" FontWeight="Bold"/>
							<Run Text="| Line Endings:" />
							<Run Text="{Binding LineBreakInfo,Mode=OneWay}" FontWeight="Bold" />
							<Run Text="| Leading Spaces:" />
							<Run Text="{Binding LeadingSpaceInfo,Mode=OneWay}" FontWeight="Bold" />
							<Run Text="| Trailing Spaces:" />
							<Run Text="{Binding TrailingSpaceInfo,Mode=OneWay}" FontWeight="Bold" />
							<Run Text="]" />
						</TextBlock>
					</StackPanel>
				</DataTemplate>
			</TreeView.Resources>
			<TreeView.ItemContainerStyle>
				<Style TargetType="{x:Type TreeViewItem}">
					<Setter Property="TreeViewItem.IsExpanded" Value="True"/>
				</Style>
			</TreeView.ItemContainerStyle>

		</TreeView>
	</Grid>
</Window>
